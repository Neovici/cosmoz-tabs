<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html">

<script>
(function () {
	'use strict';
	window.Cosmoz = window.Cosmoz || {};

	/**
	 * @polymerBehavior Cosmoz.TabbedBehavior
	*/
	Cosmoz.TabbedBehaviorImpl = {
		/**
		 * Fired when the element should have it's selection state toggled.
		 *
		 * @event cosmoz-tab-toggle
		 */

		/**
		 * Fired when the element is being selected for the first time.
		 *
		 * @event tab-first-select
		 */

		/**
		 * Fired when the element is being selected.
		 *
		 * @event tab-select
		 */

		properties: {
			/**
			 * True if the item is selected.
			 */
			isSelected: {
				type: Boolean,
				value: false,
				reflectToAttribute: true,
				notify: true
			},

			/**
			 * True if item is in accordion mode.
			 * This property should be forwarded by an ancestor `Cosmoz.TabbableBehavior` element.
			 */
			accordion: {
				type: Boolean,
				value: false,
				notify: true,
				reflectToAttribute: true
			},

			/**
			 * The items's heading text.
			 */
			heading: {
				type: String,
				notify: true
			},

			/**
			 * The icon of the item.
			 */
			icon: {
				type: String,
				value: 'radio-button-unchecked',
			},

			/**
			 * The icon of the item when it is selected.
			 */
			selectedIcon: {
				type: String,
				value: 'radio-button-checked',
			},

			/**
			 *  The color of the items's icon.
			 */
			iconColor: {
				type: String,
				value: '#15b0d3',
			},

			/**
			 * When not empty the element will contain a `paper-bagde` with the label set to this property.
			 */
			badge: {
				type: String,
				value: '',
				notify: true
			},
		},

		/**
		 * Computes the element's opened icon depending on the `opened` property
		 *
		 * @param  {Boolean} isSelected True if tab is opened
		 * @return {void}
		 */
		_computeOpenedIcon: function (isSelected) {
			return isSelected ? 'expand-less' : 'expand-more';
		},

		/**
		 * Returns the element's icon.
		 *
		 * @returns {void}
		 */
		getIcon: function () {
			return this.isSelected && !this.accordion ? this.selectedIcon : this.icon;
		},

		/**
		 * Returns the element's icon style.
		 *
		 * @returns {void}
		 */
		getIconStyle: function () {
			if (this.iconColor) {
				return 'color: ' + this.iconColor;
			}
		},

		/**
		 * Triggers a `cosmoz-tab-toggle` event.
		 *
		 * @returns {void}
		 * @fires cosmoz-tab-toggle
		 */
		_onToggleTap: function () {
			this.fire('cosmoz-tab-toggle');
		}
	};

	/** @polymerBehavior */
	Cosmoz.TabbedBehavior = [
		Polymer.IronResizableBehavior,
		Cosmoz.TabbedBehaviorImpl
	];
})();
</script>
