<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-badge/paper-badge.html">

<link rel="import" href="cosmoz-tabs-behavior.html">
<link rel="import" href="cosmoz-tab-behavior.html">
<link rel="import" href="cosmoz-tab-card.html">
<!--
`<cosmoz-tab>` is the container for a tab. It should be used in conjunction with
`cosmoz-tabs`.

### Styling
The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--cosmoz-tab` | Mixin applied to the tab | `{}`
`--cosmoz-tab-header` | Mixin applied to the tab header | `{}`
`--cosmoz-tab-header-selected` | Mixin applied to the header when the tab is selected | `{}`
`--cosmoz-tab-header-accordion` | Mixin applied to the header when the tab is in accordion mode | `{}`
`--cosmoz-tab-header-accordion-selected` | Mixin applied to the header when the tab is selected in accordion mode | `{}`

@demo demo/index.html
-->
<dom-module id="cosmoz-tab">
	<template>
		<style include="iron-flex iron-positioning">

			:host {
				display: block;
				@apply --cosmoz-tab;
			}

			:host(:not([accordion])) {
				@apply --layout-vertical;
			}

			:host([disabled]),
			:host([hidden]) {
				display: none !important;
			}

			/* do not display tab header when in accordion mode and using cards */
			:host([accordion][use-cards]) > #tabHeader {
				display: none;
			}

			:host > #tabHeader {
				cursor: pointer;
				@apply --layout-horizontal;
				@apply --layout-center;
				@apply --cosmoz-tab-header;
			}

			:host([is-selected]) > #tabHeader {
				@apply --cosmoz-tab-header-selected;
			}

			:host(:not([accordion])) > #tabHeader {
				display: none;
			}

			:host([accordion]) > #tabHeader {
				border-bottom: 1px solid #e2e2e2;
				@apply --cosmoz-tab-header-accordion;
			}

			:host([is-selected][accordion]) > #tabHeader {
				@apply --cosmoz-tab-header-accordion-selected;
			}

			.heading {
				font-family: sans-serif;
				font-size: 17px;
				font-weight: 300;
				margin-right: 30px;
				text-overflow: ellipsis;
				white-space: nowrap;
				padding: 0;
				overflow: hidden;
				@apply --layout-flex;
			}

			:host([accordion]) .heading {
				font-weight: 400;
			}

			:host(:not([accordion])[is-selected]) .heading {
				font-weight: 500;
			}

			.icon {
				height: 13px;
				width: 13px;
				margin: 0 10px 0 20px;
				flex-shrink: 0;
			}

			:host([accordion]) .icon {
				margin: 0 9px;
			}


			#tabContent {
				position: relative;
			}

			:host([flex]:not([accordion])) #tabContent {
				@apply --layout-vertical;
			}

			:host([has-cards]:not([accordion])) #tabContent {
				@apply --layout-horizontal;
				@apply --layout-wrap;
			}
			:host([has-cards][accordion])  #tabContent {
				display: block;
			}

			paper-badge {
				--paper-badge-margin-left: 25px;
			}

		</style>

		<!--
			tabHeader will displayed only in accordion mode.
			Otherwise, the tab header is rendered by cosmoz-tabs using paper-tabs
			-->
		<div id="tabHeader" on-tap="_onTap">
			<iron-icon class="icon" icon="[[ getIcon(isSelected, accordion, icon, selectedIcon) ]]" style$="[[ getIconStyle(iconColor) ]]"></iron-icon>
			<h1 class="heading"><span id="tabHeading">[[ heading ]]</span></h1>
			<paper-badge for="tabHeading" hidden$="[[ !badge ]]" label="[[ badge ]]"></paper-badge>
			<paper-icon-button icon="[[ _computeOpenedIcon(isSelected) ]]"></paper-icon-button>
		</div>

		<iron-collapse id="collapse" no-animation="[[ !accordion ]]" opened="[[ _computeOpened(hasCards, isSelected) ]]">
			<div id="tabContent">
				<slot></slot>
			</div>
		</iron-collapse>

	</template>
	<script type="text/javascript" src="cosmoz-tab.js"></script>
</dom-module>
